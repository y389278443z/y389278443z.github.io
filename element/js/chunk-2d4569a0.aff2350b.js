(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d4569a0"],{"004b":function(t,e,i){"use strict";var s=i("c2fe"),a=i.n(s);a.a},"2c4b":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"footer flexAlign"},[i("div",{class:{active:t.isActive("msite")}},[i("router-link",{attrs:{to:"/msite"}},[i("i",{staticClass:"iconfont icon-shouye"}),i("p",[t._v("首页")])])],1),i("div",{class:{active:t.isActive("search")}},[i("router-link",{attrs:{to:"/search/"+t.geohash}},[i("i",{staticClass:"iconfont icon-faxian"}),i("p",[t._v("发现")])])],1),i("div",{class:{active:t.isActive("order")}},[i("router-link",{attrs:{to:"/order"}},[i("i",{staticClass:"iconfont el-icon-document"}),i("p",[t._v("订单")])])],1),i("div",{class:{active:t.isActive("profile")}},[i("router-link",{attrs:{to:"/profile"}},[i("i",{staticClass:"iconfont icon-geren"}),i("p",[t._v("我的")])])],1)])},a=[],n=(i("7364"),i("ed08")),r="geo_hash",o=1500,c={name:"footBottom",data:function(){return{geohash:""}},methods:{isActive:function(t){return this.$route.name===t}},created:function(){var t=this,e=Object(n["b"])(r);e?this.geohash=e:(this.$msg({text:"请重新选择地址信息！"}),setTimeout(function(){t.$router.push({name:"choiceCity"})},o))}},l=c,d=(i("004b"),i("17cc")),u=Object(d["a"])(l,s,a,!1,null,"6f6f59a5",null);e["a"]=u.exports},7915:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],staticClass:"order"},[i("header-top",{ref:"head",attrs:{text:t.text}}),i("div",{ref:"content",staticClass:"order-container"},[i("ul",{staticClass:"order-list"},[t._l(t.orderList,function(e,s){return i("li",{key:s,staticClass:"disFlex",on:{click:function(i){return t.orderDetail(e.restaurant_id)}}},[i("div",{staticClass:"order-img"},[i("img",{staticClass:"img100",attrs:{src:t.imgBaseUrl+"/shopIcon/"+e.restaurant_image_url,alt:""}})]),i("div",{staticClass:"order-info grow1"},[i("div",{staticClass:"order-name alignItem marginB1"},[i("h3",{staticClass:"grow1 textEllipsis"},[t._v(t._s(e.restaurant_name))])]),i("div",{staticClass:"c999 marginB2"},[t._v(t._s(t.changeDate(e.order_time)))]),i("div",{staticClass:"alignItem pte5"},[i("p",[t._v(t._s(e.shop_name)+"商铺的"+t._s(e.total_amount)+"件商品")]),i("p",{staticClass:"ce6"},[t._v("￥"+t._s(e.total_quantity))])]),i("div",{staticClass:"tr pte5 cf5"},[t.isTimeOver(e.order_time)?i("span",{staticClass:"to-pay",on:{click:function(i){return i.stopPropagation(),t.toPay(e.restaurant_id)}}},[t._v("去支付")]):i("span",{staticClass:"to-pay",on:{click:function(i){return i.stopPropagation(),t.getNew(e.restaurant_id)}}},[t._v("再来一单")])])])])}),i("li",{directives:[{name:"show",rawName:"v-show",value:t.loadMore,expression:"loadMore"}]},[t._v("\n                加载更多"),i("span",{staticClass:"el-icon-loading"})]),t.noMore?i("li",[t._v("\n                没有更多了\n            ")]):t._e()],2)]),i("router-view"),i("foot-bottom",{ref:"foot"})],1)},a=[],n=i("dad6"),r=i("f392"),o=i("2c4b"),c=i("365c"),l=i("ed08"),d=i("e490"),u="user_info",h={name:"order",components:{headerTop:r["a"],footBottom:o["a"]},data:function(){return{text:"订单列表",userId:null,offset:0,orderList:[],imgBaseUrl:d["b"],loadMore:!1,isLoading:!1,noMore:!1,headHeight:0,windowHeight:0}},methods:{isTimeOver:function(t){var e=Date.now();return!(new Date(t).getTime()+9e5<e)},changeDate:function(t){return Object(l["a"])(t,"yyyy-MM-dd hh:mm:ss")},toPay:function(t){this.$router.push({name:"pay",params:{restaurant_id:t}})},getNew:function(t){this.$router.push({name:"shopDetail",params:{id:t}})},orderDetail:function(t){this.$router.push({name:"orderDetail",params:{restaurant_id:t}})},scrollLoad:function(){var t=this;if(!this.noMore&&!this.isLoading){var e=document.documentElement.scrollTop,i=Object(l["c"])(this.$refs.content,"height");e+this.windowHeight-this.headHeight>i&&(this.loadMore=!0,this.offset+=10,this.isLoading=!0,Object(c["h"])(this.userId,this.offset).then(function(e){e.length>=10?t.orderList=[].concat(Object(n["a"])(t.orderList),Object(n["a"])(e)):(t.loadMore=!1,t.noMore=!0),t.isLoading=!1}))}}},created:function(){var t=this;this.userId=JSON.parse(Object(l["b"])(u)).user_id,Object(c["h"])(this.userId,this.offset).then(function(e){t.orderList=e,e.length<10&&(t.noMore=!0)})},mounted:function(){this.headHeight=Object(l["c"])(this.$refs.head.$el,"height"),this.windowHeight=document.documentElement.clientHeight,window.addEventListener("scroll",this.scrollLoad)},beforeDestroy:function(){window.removeEventListener("scroll",this.scrollLoad)}},f=h,v=(i("9eea"),i("17cc")),m=Object(v["a"])(f,s,a,!1,null,"3dee9d20",null);e["default"]=m.exports},"86ab":function(t,e,i){},"9eea":function(t,e,i){"use strict";var s=i("86ab"),a=i.n(s);a.a},c2fe:function(t,e,i){},dad6:function(t,e,i){"use strict";function s(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}function a(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function n(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function r(t){return s(t)||a(t)||n()}i.d(e,"a",function(){return r})},f392:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"yz-header baseBg",class:{fixed:t.fixed}},[i("div",{staticClass:"lc-header"},[i("span",{staticClass:"el-icon-arrow-left header-left-icon",on:{click:t.back}}),i("span",[t._v(t._s(t.text))])])])},a=[],n={name:"headerTop",props:{text:{},fixed:{default:!1}},methods:{back:function(){this.$router.back(-1)}}},r=n,o=i("17cc"),c=Object(o["a"])(r,s,a,!1,null,"583480de",null);e["a"]=c.exports}}]);