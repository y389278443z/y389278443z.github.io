(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7820a555"],{"178d":function(t,s,i){"use strict";var e=function(){var t=this,s=t.$createElement,i=t._self._c||s;return t.shopList.length?i("ul",{ref:"list",staticClass:"store-list"},[t._l(t.shopList,function(s,e){return i("li",{key:s.id,staticClass:"list-item",on:{click:function(i){return t.toDetail(s.id)}}},[i("div",{staticClass:"disFlex "},[i("div",{staticClass:"list-image"},[i("img",{attrs:{src:t.imgBaseUrl+"/shopIcon/"+s.image_path,alt:""}})]),i("div",{staticClass:"list-info disFlex"},[i("section",{staticClass:"alignItem bfcHidden"},[i("h3",{staticClass:"flexAlign bfcHidden f15 c222"},[s.is_premium?i("span",{staticClass:"title-pinpai"},[t._v("品牌")]):t._e(),i("span",{staticClass:"textEllipsis"},[t._v(t._s(s.name))])]),i("div",{staticClass:"right-operate",on:{click:function(s){return s.stopPropagation(),t.showModel(s)}}},[i("i",{staticClass:"el-icon-more"})])]),i("section",{staticClass:"score-info alignItem"},[i("div",{staticClass:"flexAlign scale8L"},[i("star-rating",{staticClass:"star-rating",attrs:{ratingScore:s.rating}}),i("span",[t._v(t._s(s.rating))]),i("span",[t._v("月售"+t._s(s.recent_order_num)+"单")])],1),s.delivery_mode?i("div",{staticClass:"state-text1 scale8R"},[t._v(t._s(s.delivery_mode.text))]):t._e()]),i("section",{staticClass:"time-info alignItem f12"},[i("div",{staticClass:"scale8L shrink0"},[i("span",[t._v("￥"+t._s(s.float_minimum_order_amount)+"起送")]),i("span",{staticClass:"before-separator"},[t._v("配送费￥"+t._s(s.float_delivery_fee))])]),i("div",{staticClass:"scale8R shrink0"},[i("span",[t._v(t._s(s.distance))]),i("span",{staticClass:"before-separator"},[t._v(t._s(t._f("timeShow")(s.order_lead_time)))])])])])]),i("div",{staticClass:"description"},t._l(s.category.split("/"),function(s,e){return i("span",{key:e,staticClass:"borderSpan disIn scale8L"},[t._v(t._s(s))])}),0),s.activities.length?i("div",{staticClass:"active-info"},t._l(s.activities,function(e,n){return i("div",{key:n,staticClass:"active-item alignItem"},[i("div",{staticClass:"flexAlign bfcHidden"},[i("span",{staticClass:"state-text"},[t._v(t._s(e.icon_name))]),i("span",{staticClass:"textEllipsis",staticStyle:{flex:"1"}},[t._v(t._s(e.name))])]),0===n&&s.activities.length>=2?i("span",{staticClass:"active-select ccc",on:{click:function(s){return s.stopPropagation(),t.showHide(s)}}},[t._v(t._s(s.activities.length)+"个活动"),i("i",{staticClass:"el-icon-caret-bottom"})]):t._e()])}),0):t._e(),i("div",{staticClass:"store-model alignCenter disNone",on:{click:function(s){return s.stopPropagation(),t.closeModel(s,e)}}},[i("span",{staticClass:"no-like"},[t._v("不喜欢")])])])}),i("li",{directives:[{name:"show",rawName:"v-show",value:t.loadMore,expression:"loadMore"}],staticClass:"tc"},[i("span",{staticClass:"el-icon-loading"}),t._v("加载更多\n    ")]),i("li",{directives:[{name:"show",rawName:"v-show",value:t.noMore,expression:"noMore"}],staticClass:"tc"},[t._v("\n        没有更多了~~~\n    ")]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"loading"},[t._m(0)])],2):t._e()},n=[function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"load-box"},[i("img",{attrs:{src:"images/timg.gif",alt:""}})])}],a=(i("96cf"),i("3b8d")),r=i("75fc"),o=i("795b"),c=i.n(o),l=i("605d"),h=i("365c"),u=i("e490"),d=i("ed08"),f={name:"shopList",components:{starRating:l["a"]},props:["geohash","kind","isNew","isNear","sort_by","keyword","confirmStatus"],data:function(){return{shopList:[],imgBaseUrl:u["b"],page:1,loadMore:!1,noMore:!1,toTop:!1,loading:!0,scrollFun:null}},filters:{timeShow:function(t){return t<60?t+"分钟":60==t?"1小时":t<=120?(t/60).toFixed(1)+"小时":"大于两小时"}},methods:{showHide:function(t){var s=t.currentTarget;s.classList.toggle("active"),s.closest(".active-info").classList.toggle("heightAuto")},showModel:function(t){var s=t.currentTarget;s.closest(".list-item").getElementsByClassName("store-model")[0].classList.remove("disNone")},closeModel:function(t,s){t.currentTarget.classList.add("disNone"),t.target.classList.contains("no-like")&&(this.shopList.push(this.shopList[s]),this.shopList.splice(s,1))},toDetail:function(t){console.log(t),this.$router.push({name:"shopDetail",params:{id:t}})},getMore:function(){var t=this;return this.noMore?c.a.resolve("noMore"):(this.loading=!0,this.loadMore=!0,this.page+=1,Object(h["k"])(this.geohash,this.kind,this.sort_by,this.isNew,this.isNear,this.page).then(function(s){s.length<10&&(t.noMore=!0),t.shopList=[].concat(Object(r["a"])(t.shopList),Object(r["a"])(s)),t.loadMore=!1,t.loading=!1}))},listenPropChange:function(){var t=Object(a["a"])(regeneratorRuntime.mark(function t(){var s=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.shopList=[],this.page=1,this.loadMore=!0,this.loading=!0,this.noMore=!1,t.next=7,Object(h["k"])(this.geohash,this.kind,this.sort_by,this.isNew,this.isNear,this.page);case 7:this.shopList=t.sent,this.loading=!1,this.shopList.length<10&&(this.noMore=!0),this.loadMore=!1,this.$nextTick(function(){s.scrollFun=Object(d["d"])(s.$refs.list,s.getMore)});case 12:case"end":return t.stop()}},t,this)}));function s(){return t.apply(this,arguments)}return s}()},created:function(){var t=Object(a["a"])(regeneratorRuntime.mark(function t(){var s=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!this.geohash||!this.keyword){t.next=8;break}return t.next=3,Object(h["r"])(this.geohash,this.keyword);case 3:this.shopList=t.sent,this.noMore=!0,this.loading=!1,t.next=14;break;case 8:return t.next=10,Object(h["k"])(this.geohash,this.kind,this.sort_by,this.isNew,this.isNear,this.page);case 10:this.shopList=t.sent,this.loading=!1,this.shopList.length<10&&(this.noMore=!0),this.$nextTick(function(){s.scrollFun=Object(d["d"])(s.$refs.list,s.getMore)});case 14:case"end":return t.stop()}},t,this)}));function s(){return t.apply(this,arguments)}return s}(),beforeDestroy:function(){window.removeEventListener("scroll",this.scrollFun)},watch:{kind:function(){this.listenPropChange()},isNear:function(){this.listenPropChange()},sort_by:function(){this.listenPropChange()},confirmStatus:function(){this.listenPropChange()},keyword:function(){var t=this;this.loading=!0,this.noMore=!1,Object(h["r"])(this.geohash,this.keyword).then(function(s){t.shopList=s,t.loading=!1,t.noMore=!0})}}},p=f,v=(i("ab3c"),i("2877")),g=Object(v["a"])(p,e,n,!1,null,"8ce889fe",null);s["a"]=g.exports},"1af6":function(t,s,i){var e=i("63b6");e(e.S,"Array",{isArray:i("9003")})},"20fd":function(t,s,i){"use strict";var e=i("d9f6"),n=i("aebd");t.exports=function(t,s,i){s in t?e.f(t,s,n(0,i)):t[s]=i}},2249:function(t,s,i){},"3d4e":function(t,s,i){"use strict";i.r(s);var e=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"shop-classify"},[i("header-top",{attrs:{text:t.title}}),i("div",{staticClass:"nav-container"},[i("ul",{staticClass:"nav disFlex tc"},[i("li",{staticClass:"grow1",class:{active:"food"==t.showType},on:{click:function(s){return t.choiceType("food")}}},[t._v("\n                商家"),i("span",{staticClass:"el-icon-caret-bottom icon"})]),i("li",{staticClass:"grow1",class:{active:"sort"==t.showType},on:{click:function(s){return t.choiceType("sort")}}},[t._v("\n                排序"),i("span",{staticClass:"el-icon-caret-bottom icon"})]),i("li",{staticClass:"grow1",class:{active:"filter"==t.showType},on:{click:function(s){return t.choiceType("filter")}}},[t._v("\n                筛选"),i("span",{staticClass:"el-icon-caret-bottom icon"})])]),i("transition",{attrs:{"enter-active-class":"show","leave-active-class":"hide"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.showType,expression:"showType"}],staticClass:"nav-detail",on:{click:function(s){t.showType=""}}},[i("div",{directives:[{name:"show",rawName:"v-show",value:"food"==t.showType,expression:"showType == 'food'"}],staticClass:"all-choice f12 disFlex"},[i("ul",{staticClass:"choice-left shrink0"},t._l(t.kinds,function(s,e){return i("li",{key:e,staticClass:"alignItem",class:{active:t.kindIndex==s.id},on:{click:function(i){return i.stopPropagation(),t.getRightList(s.id,s.sub_categories)}}},[i("div",{staticClass:"flexAlign"},[i("img",{attrs:{src:t.imgBaseUrl+"category/"+s.image_url,alt:""}}),i("span",[t._v(t._s(s.name))])]),i("div",[i("span",{staticClass:"amount"},[t._v(t._s(s.count))]),i("span",{staticClass:"el-icon-arrow-right"})])])}),0),i("ul",{staticClass:"choice-right grow1 shrink0"},t._l(t.rightList,function(s,e){return i("li",{key:e,staticClass:"alignItem",on:{click:function(i){return t.getRestaurantId(s)}}},[i("span",[t._v(t._s(s.name))]),2==s.level?i("span",[t._v(t._s(s.count))]):t._e()])}),0)]),i("ul",{directives:[{name:"show",rawName:"v-show",value:"sort"==t.showType,expression:"showType == 'sort'"}],staticClass:"sort-list"},[i("li",{class:{active:1==t.sortIndex},on:{click:function(s){return t.sortClick(1)}}},[i("div",[i("span",{staticClass:"el-icon-sort icon baseC"}),i("span",[t._v("智能排序")])]),i("span",{staticClass:"el-icon-check"})]),i("li",{class:{active:2==t.sortIndex},on:{click:function(s){return t.sortClick(2)}}},[i("div",[i("span",{staticClass:"el-icon-location-outline icon ce6"}),i("span",[t._v("离我最近")])]),i("span",{staticClass:"el-icon-check"})]),i("li",{class:{active:3==t.sortIndex},on:{click:function(s){return t.sortClick(3)}}},[i("div",[i("span",{staticClass:"el-icon-upload2 icon c67"}),i("span",[t._v("销量最高")])]),i("span",{staticClass:"el-icon-check"})]),i("li",{class:{active:4==t.sortIndex},on:{click:function(s){return t.sortClick(4)}}},[i("div",[i("span",{staticClass:"iconfont icon-jinbi icon cf5"}),i("span",[t._v("起送价最高")])]),i("span",{staticClass:"el-icon-check"})]),i("li",{class:{active:5==t.sortIndex},on:{click:function(s){return t.sortClick(5)}}},[i("div",[i("span",{staticClass:"el-icon-star-off ce6 icon"}),i("span",[t._v("评分最高")])]),i("span",{staticClass:"el-icon-check"})])]),i("div",{directives:[{name:"show",rawName:"v-show",value:"filter"==t.showType,expression:"showType == 'filter'"}],staticClass:"filter"},[i("div",{staticClass:"delivery"},[i("h4",[t._v("配送方式")]),i("ul",{staticClass:"filter-list clear"},[i("li",{class:{active:t.choiceDelivery},on:{click:function(s){return s.stopPropagation(),t.deliveryClick(s)}}},[i("span",{staticClass:"el-icon-sold-out icon"}),i("span",[t._v("蜂鸟快送")])])])]),i("div",{staticClass:"shop-kind"},[i("h4",[t._v("商家属性")]),i("ul",{staticClass:"filter-list clear"},[i("li",{staticClass:"ce6",class:{active:t.isNewShop},on:{click:function(s){return s.stopPropagation(),t.supportClick(s)}}},[i("span",{staticClass:"icon name-icon"},[t._v("新")]),i("span",[t._v("新店")])])])]),i("div",{staticClass:"choice-btn alignItem"},[i("el-button",{attrs:{type:"primary"},on:{click:t.clearAll}},[t._v("清空")]),i("el-button",{attrs:{type:"success"},on:{click:t.submitAll}},[t._v("确定")])],1)])])])],1),t.getList?i("shop-list",{attrs:{geohash:t.geohash,kind:t.kind,isNear:t.isNear,sort_by:t.sort_by,isNew:t.isNew,confirmStatus:t.confirmStatus}}):t._e()],1)},n=[],a=i("e814"),r=i.n(a),o=(i("7f7f"),i("ac6a"),i("96cf"),i("3b8d")),c=i("f392"),l=i("178d"),h=i("e490"),u=i("ed08"),d=i("365c"),f="geo_hash",p={name:"shopClassify",components:{headerTop:c["a"],shopList:l["a"]},data:function(){return{text:"",geohash:"",id:"",title:"",kind:"",kinds:[],rightList:[],kindIndex:void 0,getList:!1,showType:"",sortIndex:"",sort_by:"",isNear:"",choiceDelivery:!1,confirmStatus:!1,imgBaseUrl:h["b"],isNewShop:!1}},created:function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(){var s,i=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return s=this.$route.query,this.title=s.title,this.id=s.id,this.changeKind(this.id),this.geohash=Object(u["b"])(f),t.next=7,Object(d["t"])();case 7:this.kinds=t.sent,this.id&&this.kinds.forEach(function(t){t.sub_categories.forEach(function(s){s.id==i.id&&(i.kindIndex=t.id,i.rightList=t.sub_categories)})}),this.getList=!0;case 10:case"end":return t.stop()}},t,this)}));function s(){return t.apply(this,arguments)}return s}(),methods:{getRightList:function(t,s){this.kindIndex=t,this.rightList=s},getRestaurantId:function(t){this.title=t.name,this.changeKind(t.id)},choiceType:function(t){this.showType!=t?this.showType=t:this.showType=""},sortClick:function(t){if(this.sortIndex=t,2==t)this.isNear=2;else switch(this.isNear=1,t){case 1:this.sort_by="";break;case 3:this.sort_by="recent_order_num";break;case 4:this.sort_by="float_minimum_order_amount";break;case 5:this.sort_by="rating";break}},deliveryClick:function(){this.choiceDelivery=!this.choiceDelivery},supportClick:function(){this.isNewShop=!this.isNewShop},clearAll:function(){this.delivery_active=!1,this.confirmStatus=!this.confirmStatus},submitAll:function(){console.log(this.isNew),this.confirmStatus=!this.confirmStatus},changeKind:function(t){switch(r()(t)){case 1:this.kind="美食";break;case 2:this.kind="超市";break;case 3:this.kind="水果";break;case 4:this.kind="医";break;case 5:this.kind="鲜花";break;case 6:this.kind="跑腿";break;case 7:this.kind="汉堡";break;case 8:this.kind="菜品";break;case 9:this.kind="炸鸡";break;case 10:case 13:this.kind="地方";break;case 12:case 17:this.kind="快餐";break;case 14:this.kind="大牌";break;case 15:this.kind="面";break;case 16:this.kind="粥";break}}},computed:{isNew:function(){return this.isNewShop?"0":""}}},v=p,g=(i("645e"),i("2877")),m=Object(g["a"])(v,e,n,!1,null,"5e28ef94",null);s["default"]=m.exports},"497a":function(t,s,i){},"52db":function(t,s,i){"use strict";var e=i("2249"),n=i.n(e);n.a},"549b":function(t,s,i){"use strict";var e=i("d864"),n=i("63b6"),a=i("241e"),r=i("b0dc"),o=i("3702"),c=i("b447"),l=i("20fd"),h=i("7cd6");n(n.S+n.F*!i("4ee1")(function(t){Array.from(t)}),"Array",{from:function(t){var s,i,n,u,d=a(t),f="function"==typeof this?this:Array,p=arguments.length,v=p>1?arguments[1]:void 0,g=void 0!==v,m=0,_=h(d);if(g&&(v=e(v,p>2?arguments[2]:void 0,2)),void 0==_||f==Array&&o(_))for(s=c(d.length),i=new f(s);s>m;m++)l(i,m,g?v(d[m],m):d[m]);else for(u=_.call(d),i=new f;!(n=u.next()).done;m++)l(i,m,g?r(u,v,[n.value,m],!0):n.value);return i.length=m,i}})},"54a1":function(t,s,i){i("6c1c"),i("1654"),t.exports=i("95d5")},"605d":function(t,s,i){"use strict";var e=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"star-rating"},[t._m(0),i("div",{staticClass:"up-star",style:{width:t.upWidth}},[i("img",{attrs:{src:"images/icons/star2.png",alt:""}})])])},n=[function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"under-star"},[i("img",{attrs:{src:"images/icons/star1.png",alt:""}})])}],a=(i("c5f6"),{name:"starRating",props:{ratingScore:{type:Number,required:!0},isDirect:{type:Boolean,default:!1}},computed:{upWidth:function(){return this.isDirect?this.ratingScore+"%":20*this.ratingScore+"%"}}}),r=a,o=(i("52db"),i("2877")),c=Object(o["a"])(r,e,n,!1,null,null,null);s["a"]=c.exports},"645e":function(t,s,i){"use strict";var e=i("497a"),n=i.n(e);n.a},"75fc":function(t,s,i){"use strict";var e=i("a745"),n=i.n(e);function a(t){if(n()(t)){for(var s=0,i=new Array(t.length);s<t.length;s++)i[s]=t[s];return i}}var r=i("774e"),o=i.n(r),c=i("c8bb"),l=i.n(c);function h(t){if(l()(Object(t))||"[object Arguments]"===Object.prototype.toString.call(t))return o()(t)}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function d(t){return a(t)||h(t)||u()}i.d(s,"a",function(){return d})},"774e":function(t,s,i){t.exports=i("d2d5")},"93b9":function(t,s,i){},"95d5":function(t,s,i){var e=i("40c3"),n=i("5168")("iterator"),a=i("481b");t.exports=i("584a").isIterable=function(t){var s=Object(t);return void 0!==s[n]||"@@iterator"in s||a.hasOwnProperty(e(s))}},a745:function(t,s,i){t.exports=i("f410")},aa77:function(t,s,i){var e=i("5ca1"),n=i("be13"),a=i("79e5"),r=i("fdef"),o="["+r+"]",c="​",l=RegExp("^"+o+o+"*"),h=RegExp(o+o+"*$"),u=function(t,s,i){var n={},o=a(function(){return!!r[t]()||c[t]()!=c}),l=n[t]=o?s(d):r[t];i&&(n[i]=l),e(e.P+e.F*o,"String",n)},d=u.trim=function(t,s){return t=String(n(t)),1&s&&(t=t.replace(l,"")),2&s&&(t=t.replace(h,"")),t};t.exports=u},ab3c:function(t,s,i){"use strict";var e=i("93b9"),n=i.n(e);n.a},c5f6:function(t,s,i){"use strict";var e=i("7726"),n=i("69a8"),a=i("2d95"),r=i("5dbc"),o=i("6a99"),c=i("79e5"),l=i("9093").f,h=i("11e9").f,u=i("86cc").f,d=i("aa77").trim,f="Number",p=e[f],v=p,g=p.prototype,m=a(i("2aeb")(g))==f,_="trim"in String.prototype,k=function(t){var s=o(t,!1);if("string"==typeof s&&s.length>2){s=_?s.trim():d(s,3);var i,e,n,a=s.charCodeAt(0);if(43===a||45===a){if(i=s.charCodeAt(2),88===i||120===i)return NaN}else if(48===a){switch(s.charCodeAt(1)){case 66:case 98:e=2,n=49;break;case 79:case 111:e=8,n=55;break;default:return+s}for(var r,c=s.slice(2),l=0,h=c.length;l<h;l++)if(r=c.charCodeAt(l),r<48||r>n)return NaN;return parseInt(c,e)}}return+s};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(t){var s=arguments.length<1?0:t,i=this;return i instanceof p&&(m?c(function(){g.valueOf.call(i)}):a(i)!=f)?r(new v(k(s)),i,p):k(s)};for(var b,C=i("9e1e")?l(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;C.length>w;w++)n(v,b=C[w])&&!n(p,b)&&u(p,b,h(v,b));p.prototype=g,g.constructor=p,i("2aba")(e,f,p)}},c8bb:function(t,s,i){t.exports=i("54a1")},d2d5:function(t,s,i){i("1654"),i("549b"),t.exports=i("584a").Array.from},f392:function(t,s,i){"use strict";var e=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"yz-header baseBg",class:{fixed:t.fixed}},[i("div",{staticClass:"lc-header"},[i("span",{staticClass:"el-icon-arrow-left header-left-icon",on:{click:t.back}}),i("span",[t._v(t._s(t.text))])])])},n=[],a={name:"headerTop",props:{text:{},fixed:{default:!1}},methods:{back:function(){this.$router.back(-1)}}},r=a,o=i("2877"),c=Object(o["a"])(r,e,n,!1,null,"583480de",null);s["a"]=c.exports},f410:function(t,s,i){i("1af6"),t.exports=i("584a").Array.isArray},fdef:function(t,s){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);